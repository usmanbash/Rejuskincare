<style>
.customer_reviews_sec {
  background: #FAF9FB;
  text-align: center;
  padding: 70px 20px 100px;
}

.customer_reviews_sec .container {
  max-width: 1160px;
  margin: 0 auto;
}

.customer_reviews_sec .title_block {
  margin-bottom: 30px;
}

.customer_reviews_sec .rating_head {
  margin-bottom: 12px;
  font-size: 16px;
  color: #666;
}

.customer_reviews_sec .custm_title {
  font-size: 36px;
  color: #240e2b;
  margin: 0;
}

.customer_reviews_sec .swiper {
  padding-bottom: 50px;
}

.review_slider_col {
  height: auto;
}

.review_slider_col img {
  border-radius: 20px;
  max-width: 100%;
  width: 100%;
  height: auto;
}

.review_slider_col .slide_content_box {
  background: #fff;
  border-radius: 20px;
  padding: 26px 30px;
  margin-top: 20px;
}

.re_user_name p {
  font-size: 20px;
  color: #000;
  font-weight: 500;
  margin: 10px 0 0;
  line-height: 24px;
}

.re_user_info p {
  font-size: 16px;
  line-height: 24px;
  color: #000;
  margin: 10px 0;
}

.user_name_rating {
  display: flex;
  justify-content: center;
}

.verified_user {
  display: flex;
  justify-content: center;
  gap: 10px;
  align-items: center;
}

.verified_user p {
  margin: 0;
  font-weight: 500;
  color: #000;
}

.verified_user img {
  max-width: 90px;
  height: auto;
}

/* Swiper Navigation */
.customer_reviews_sec .swiper-button-prev,
.customer_reviews_sec .swiper-button-next {
  color: #744682;
  width: 50px;
  height: 50px;
  top: 25%;
}

.customer_reviews_sec .swiper-button-prev:after,
.customer_reviews_sec .swiper-button-next:after {
  font-size: 24px;
  font-weight: bold;
}

.customer_reviews_sec .swiper-button-disabled {
  display: none;
}

/* Swiper Pagination */
.customer_reviews_sec .swiper-pagination {
  bottom: 0 !important;
}

.customer_reviews_sec .swiper-pagination-bullet {
  width: 12px;
  height: 12px;
  background: #744682;
  opacity: 0.5;
}

.customer_reviews_sec .swiper-pagination-bullet-active {
  opacity: 1;
}

@media(max-width: 749px) {
  .customer_reviews_sec .custm_title {
    font-size: 28px;
  }
  
  .re_user_name p {
    font-size: 18px;
  }
  
  .re_user_info p {
    font-size: 16px;
    line-height: 24px;
  }
  
  .customer_reviews_sec .swiper-button-prev,
  .customer_reviews_sec .swiper-button-next {
    width: 40px;
    height: 40px;
  }
  
  .customer_reviews_sec .swiper-button-prev:after,
  .customer_reviews_sec .swiper-button-next:after {
    font-size: 18px;
  }
}
</style>

<div class="customer_reviews_sec">
  <div class="container">
    {% if section.settings.rating_heading != blank or section.settings.main_heading != blank %}
      <div class="title_block">
        {% if section.settings.rating_heading != blank %}
          <h6 class="rating_head">{{ section.settings.rating_heading }}</h6>
        {% endif %}
        {% if section.settings.main_heading != blank %}
          <h3 class="custm_title">{{ section.settings.main_heading }}</h3>
        {% endif %}
      </div>
    {% endif %}

    {%- if section.blocks.size > 0 -%}
      <div class="swiper swiper-reviews-{{ section.id }}">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            <div class="swiper-slide review_slider_col" {{ block.shopify_attributes }}>
              {% if block.settings.image != blank %}
                {{ block.settings.image | image_url: width: 1500 | image_tag: 
                  loading: 'lazy',
                  class: 'img-fluid',
                  alt: block.settings.reviewer_name | default: 'Customer Review'
                }}
              {% endif %}

              <div class="slide_content_box">
                {% if block.settings.review_title != blank %}
                  <div class="review_user_wrapper">
                    <div class="re_user_name">
                      <p>{{ block.settings.review_title }}</p>
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.review_text != blank %}
                  <div class="re_user_info">
                    <p>"{{ block.settings.review_text }}"</p>
                  </div>
                {% endif %}

                <div class="user_name_rating">
                  <div class="verified_user">
                    {% if block.settings.star_rating != blank %}
                      {{ block.settings.star_rating | image_url: width: 96 | image_tag: 
                        loading: 'lazy',
                        alt: '5 star rating'
                      }}
                    {% endif %}
                    {% if block.settings.reviewer_name != blank %}
                      <p>{{ block.settings.reviewer_name }}</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>

        <div class="swiper-pagination swiper-pagination-{{ section.id }}"></div>
        <div class="swiper-button-prev swiper-button-prev-{{ section.id }}"></div>
        <div class="swiper-button-next swiper-button-next-{{ section.id }}"></div>
      </div>
    {%- endif -%}
  </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    new Swiper('.swiper-reviews-{{ section.id }}', {
      slidesPerView: {{ section.settings.slides_mobile | default: 1 }},
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 4000,
        disableOnInteraction: false,
      },
      navigation: {
        nextEl: '.swiper-button-next-{{ section.id }}',
        prevEl: '.swiper-button-prev-{{ section.id }}',
      },
      pagination: {
        el: '.swiper-pagination-{{ section.id }}',
        clickable: true,
      },
      breakpoints: {
        750: {
          slidesPerView: {{ section.settings.slides_tablet | default: 2 }},
          spaceBetween: 30,
        },
        1200: {
          slidesPerView: {{ section.settings.slides_desktop | default: 3 }},
          spaceBetween: 30,
        }
      }
    });
  });
</script>

{% schema %}
{
  "name": "Customer Reviews Slider",
  "settings": [
    {
      "type": "text",
      "id": "rating_heading",
      "label": "Rating Heading",
      "default": "Customer Reviews"
    },
    {
      "type": "text",
      "id": "main_heading",
      "label": "Main Heading",
      "default": "HairMagic+ Transformations"
    },
    {
      "type": "range",
      "id": "slides_desktop",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Slides on desktop (1200px+)",
      "default": 3
    },
    {
      "type": "range",
      "id": "slides_tablet",
      "min": 1,
      "max": 3,
      "step": 1,
      "label": "Slides on tablet (750px+)",
      "default": 2
    },
    {
      "type": "range",
      "id": "slides_mobile",
      "min": 1,
      "max": 3,
      "step": 1,
      "label": "Slides on mobile",
      "default": 1
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Review Image"
        },
        {
          "type": "text",
          "id": "review_title",
          "label": "Review Title",
          "default": "Amazing Product!"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text",
          "default": "This product has literally saved me hundreds of dollars! I used to rush to the salon every 3 weeks for root touch-ups, but now I easily stretch to 6 weeks between appointments."
        },
        {
          "type": "image_picker",
          "id": "star_rating",
          "label": "Star Rating Image"
        },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reviewer Name",
          "default": "Jessica B."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Customer Reviews Slider",
      "category": "custom"
    }
  ]
}
{% endschema %}

